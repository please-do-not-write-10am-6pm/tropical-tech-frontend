{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { TextInput, Snackbar } from 'react-native-paper';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport styles from \"./styles\";\nimport logo from \"../../assets/img/logo-login.png\";\nimport config from \"../../config/config\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar VerificationCode = function VerificationCode(props) {\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      userId = _useState2[0],\n      setUserId = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      code = _useState4[0],\n      setCode = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      visible = _useState6[0],\n      setVisible = _useState6[1];\n\n  var onToggleSnackBar = function onToggleSnackBar() {\n    return setVisible(!visible);\n  };\n\n  var onDismissSnackBar = function onDismissSnackBar() {\n    return setVisible(false);\n  };\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errorMsg = _useState8[0],\n      setErrorMsg = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      modalDocSuccessVisible = _useState10[0],\n      setModalDocSuccessVisible = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      modalVisible = _useState12[0],\n      setModalVisible = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      modalSuccessVisible = _useState14[0],\n      setModalSuccessVisible = _useState14[1];\n\n  useEffect(function () {\n    getUser();\n  }, []);\n\n  function getUser() {\n    var response, json;\n    return _regeneratorRuntime.async(function getUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('userData'));\n\n          case 2:\n            response = _context.sent;\n            json = JSON.parse(response);\n            setUserId(json.id);\n            generateCode(json.id);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function generateCode(id) {\n    var response;\n    return _regeneratorRuntime.async(function generateCode$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log('ID 123 = ' + id);\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(fetch(config.urlRoot + \"signup/generateCode\", {\n              method: 'POST',\n              headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                id: id\n              })\n            }));\n\n          case 3:\n            response = _context2.sent;\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function verifyCode() {\n    var response, json;\n    return _regeneratorRuntime.async(function verifyCode$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(fetch(config.urlRoot + \"signup/verifyCode\", {\n              method: 'POST',\n              headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                id: userId,\n                code: code\n              })\n            }));\n\n          case 2:\n            response = _context3.sent;\n            _context3.next = 5;\n            return _regeneratorRuntime.awrap(response.json());\n\n          case 5:\n            json = _context3.sent;\n\n            if (json.success === true) {\n              props.navigation.navigate('SignupComplete');\n            } else {\n              setErrorMsg(json.message);\n              setVisible(true);\n            }\n\n          case 7:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Snackbar, {\n      visible: visible,\n      onDismiss: onDismissSnackBar,\n      action: {\n        label: 'X'\n      },\n      theme: {\n        colors: {\n          onSurface: 'rgba(211, 47, 47, 0.8)',\n          surface: '#fff'\n        },\n        textAlign: 'center'\n      },\n      children: errorMsg\n    }), _jsx(Text, {\n      style: styles.title,\n      children: \"Thank you for signing up!\"\n    }), _jsx(Image, {\n      style: styles.logo,\n      source: logo\n    }), _jsx(Text, {\n      style: styles.description,\n      children: \"We have just sent you an email to activate your account.\"\n    }), _jsx(Text, {\n      style: styles.description,\n      children: \"Enjoy!\"\n    }), _jsxs(View, {\n      style: styles.form,\n      children: [_jsx(TextInput, {\n        style: styles.input,\n        placeholder: \"ENTER VERIFICATION CODE\",\n        keyboardType: \"numeric\",\n        maxLength: 4,\n        onChangeText: function onChangeText(text) {\n          return setCode(text);\n        }\n      }), _jsx(TouchableOpacity, {\n        style: styles.loginButton,\n        onPress: function onPress() {\n          return verifyCode();\n        },\n        children: _jsx(Text, {\n          style: styles.loginButtonText,\n          children: \"Submit\"\n        })\n      })]\n    })]\n  });\n};\n\nexport default VerificationCode;","map":{"version":3,"names":["React","useState","useEffect","TextInput","Snackbar","AsyncStorage","styles","logo","config","VerificationCode","props","userId","setUserId","code","setCode","visible","setVisible","onToggleSnackBar","onDismissSnackBar","errorMsg","setErrorMsg","modalDocSuccessVisible","setModalDocSuccessVisible","modalVisible","setModalVisible","modalSuccessVisible","setModalSuccessVisible","getUser","getItem","response","json","JSON","parse","id","generateCode","console","log","fetch","urlRoot","method","headers","Accept","body","stringify","verifyCode","success","navigation","navigate","message","container","label","colors","onSurface","surface","textAlign","title","description","form","input","text","loginButton","loginButtonText"],"sources":["E:/git_repo/tropical-techcom/front-end/views/VerificationCode/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n\tView,\r\n\tTouchableOpacity,\r\n\tText,\r\n\tImage,\r\n} from 'react-native';\r\nimport { TextInput, Snackbar } from 'react-native-paper';\r\nimport AsyncStorage from '@react-native-async-storage/async-storage';\r\nimport styles from './styles';\r\nimport logo from '../../assets/img/logo-login.png';\r\nimport config from '../../config/config';\r\n\r\nconst VerificationCode = props => {\r\n\tconst [userId, setUserId] = useState(null);\r\n\tconst [code, setCode] = useState(null);\r\n\tconst [visible, setVisible] = useState(false);\r\n\tconst onToggleSnackBar = () => setVisible(!visible);\r\n\tconst onDismissSnackBar = () => setVisible(false);\r\n\tconst [errorMsg, setErrorMsg] = useState(null);\r\n\tconst [\r\n\t\tmodalDocSuccessVisible,\r\n\t\tsetModalDocSuccessVisible,\r\n\t] = useState(false);\r\n\tconst [modalVisible, setModalVisible] =\r\n\t\tuseState(false);\r\n\tconst [modalSuccessVisible, setModalSuccessVisible] =\r\n\t\tuseState(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tgetUser();\r\n\t}, []);\r\n\r\n\t//Pegar o id do usuÃ¡rio\r\n\tasync function getUser() {\r\n\t\tlet response = await AsyncStorage.getItem(\r\n\t\t\t'userData'\r\n\t\t);\r\n\t\tlet json = JSON.parse(response);\r\n\t\tsetUserId(json.id);\r\n\t\tgenerateCode(json.id);\r\n\t}\r\n\r\n\t/* useEffect(()=>{\r\n    generateCode();\r\n  }, []);*/\r\n\r\n\tasync function generateCode(id) {\r\n\t\t//getUser();\r\n\t\tconsole.log('ID 123 = ' + id);\r\n\t\tlet response = await fetch(\r\n\t\t\t`${config.urlRoot}signup/generateCode`,\r\n\t\t\t{\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAccept: 'application/json',\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tid: id,\r\n\t\t\t\t}),\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tasync function verifyCode() {\r\n\t\t//console.log(code);\r\n\t\tlet response = await fetch(\r\n\t\t\t`${config.urlRoot}signup/verifyCode`,\r\n\t\t\t{\r\n\t\t\t\tmethod: 'POST',\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAccept: 'application/json',\r\n\t\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t\t},\r\n\t\t\t\tbody: JSON.stringify({\r\n\t\t\t\t\tid: userId,\r\n\t\t\t\t\tcode: code,\r\n\t\t\t\t}),\r\n\t\t\t}\r\n\t\t);\r\n\t\tlet json = await response.json();\r\n\t\tif (json.success === true) {\r\n\t\t\tprops.navigation.navigate('SignupComplete');\r\n\t\t} else {\r\n\t\t\tsetErrorMsg(json.message);\r\n\t\t\tsetVisible(true);\r\n\t\t}\r\n\t}\r\n\r\n\treturn (\r\n\t\t<View style={styles.container}>\r\n\t\t\t<Snackbar\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\tonDismiss={onDismissSnackBar}\r\n\t\t\t\taction={{\r\n\t\t\t\t\tlabel: 'X',\r\n\t\t\t\t}}\r\n\t\t\t\ttheme={{\r\n\t\t\t\t\tcolors: {\r\n\t\t\t\t\t\tonSurface:\r\n\t\t\t\t\t\t\t'rgba(211, 47, 47, 0.8)',\r\n\t\t\t\t\t\tsurface: '#fff',\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{errorMsg}\r\n\t\t\t</Snackbar>\r\n\t\t\t<Text style={styles.title}>\r\n\t\t\t\tThank you for signing up!\r\n\t\t\t</Text>\r\n\t\t\t<Image style={styles.logo} source={logo} />\r\n\t\t\t<Text style={styles.description}>\r\n\t\t\t\tWe have just sent you an email to\r\n\t\t\t\tactivate your account.\r\n\t\t\t</Text>\r\n\t\t\t<Text style={styles.description}>\r\n\t\t\t\tEnjoy!\r\n\t\t\t</Text>\r\n\t\t\t<View style={styles.form}>\r\n\t\t\t\t<TextInput\r\n\t\t\t\t\tstyle={styles.input}\r\n\t\t\t\t\tplaceholder=\"ENTER VERIFICATION CODE\"\r\n\t\t\t\t\tkeyboardType=\"numeric\"\r\n\t\t\t\t\tmaxLength={4}\r\n\t\t\t\t\tonChangeText={text =>\r\n\t\t\t\t\t\tsetCode(text)\r\n\t\t\t\t\t}\r\n\t\t\t\t/>\r\n\t\t\t\t<TouchableOpacity\r\n\t\t\t\t\tstyle={styles.loginButton}\r\n\t\t\t\t\tonPress={() => verifyCode()}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Text\r\n\t\t\t\t\t\tstyle={styles.loginButtonText}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t</Text>\r\n\t\t\t\t</TouchableOpacity>\r\n\t\t\t</View>\r\n\t\t</View>\r\n\t);\r\n};\r\n\r\nexport default VerificationCode;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}